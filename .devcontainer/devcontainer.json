// .devcontainer/devcontainer.json
{
  "name": "FinDash Project",

  // 1. Aponta para o docker-compose
  "dockerComposeFile": "docker-compose.yml",

  // 2. [CORREÇÃO] Aponta para o serviço "app" do compose
  //    (Resolve "propriedade 'service' está ausente")
  "service": "app",

  // 3. [REMOVIDO] "image" não é mais usada aqui
  //    (Resolve "propriedade 'image' não é permitida")

  // 4. Diz onde o VS Code deve abrir (caminho dentro do container)
  "workspaceFolder": "/workspace/findash",

  // 5. Quais serviços extras devem subir juntos
  "runServices": ["postgres-db", "rabbitmq"],

  "shutdownAction": "stopCompose",

  // 6. Features serão instaladas DENTRO do serviço "app"
  "features": {
    "ghcr.io/devcontainers/features/git-lfs:1": {}
  },

  // 7. Extensões (continua igual)
  "customizations": {
    "vscode": {
      "extensions": [
        "vscjava.vscode-java-pack",
        "pivotal.vscode-spring-boot",
        "vmware.vscode-spring-boot-dashboard",
        "esbenp.prettier-vscode",
        "dbaeumer.vscode-eslint"
      ]
    }
  },

  // 8. Encaminha as portas (continua igual)
  "forwardPorts": [5433, 15672, 8080, 8081, 8082, 3000],

  // 9. Comando pós-criação (continua igual)
  "postCreateCommand": "java -version && git lfs --version"
}